<!DOCTYPE html>

<div id="main">

</div>

<pre id="log"></pre>

<script>
	// helper function: log message to screen
	function log(msg) {
		//document.getElementById('log').textContent += msg + '\n';
	}

	// setup websocket with callbacks
	var ws = new WebSocket('ws://192.168.1.48:8080/');
	ws.onopen = function() {
		log('CONNECT');
	};
	ws.onclose = function() {
		log('DISCONNECT');
	};
	ws.onmessage = function(event) {
		log('MESSAGE: ' + event.data);
		var key = event.data.split(':')[0];
		var value = event.data.split(':')[1];

		var addOrModify = function(key, value) {

			var el = document.getElementById(key);
			if (!el){
				var main = document.getElementById('main');
				var div = document.createElement('div');
				div.setAttribute('id', key);
				main.appendChild(div);
				el = document.getElementById(key);
			}
			el.innerHTML = key + ":" + value;
		};

		addOrModify(key, value);
	};
</script>
